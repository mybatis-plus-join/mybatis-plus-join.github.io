import{_ as c,c as i,d as e,a,e as s,b as t,w as r,r as p,o as u}from"./app-6LXgrC7W.js";const d={},m={id:"wrapper动态表名支持",tabindex:"-1"},k={class:"header-anchor",href:"#wrapper动态表名支持"},b={class:"custom-container danger"};function v(g,n){const l=p("Badge"),o=p("RouteLink");return u(),i("div",null,[n[8]||(n[8]=e('<h1 id="动态表名" tabindex="-1"><a class="header-anchor" href="#动态表名"><span>动态表名</span></a></h1><h2 id="mybatis-plus-动态表名插件" tabindex="-1"><a class="header-anchor" href="#mybatis-plus-动态表名插件"><span><a href="https://baomidou.com/plugins/dynamic-table-name/" target="_blank" rel="noopener noreferrer">MyBatis-Plus 动态表名插件</a></span></a></h2>',2)),a("h2",m,[a("a",k,[a("span",null,[n[0]||(n[0]=s("wrapper动态表名支持 ")),t(l,{type:"tip",text:"1.4.4+",vertical:"top"})])])]),n[9]||(n[9]=a("div",{class:"custom-container warning"},[a("p",{class:"custom-container-title"},"注意事项:"),a("p",null,[s("wrapper 动态表名版本需要1.4.4+"),a("br"),s(" 使用动态表名有sql有注入风险, 使用时需自行把控")])],-1)),a("div",b,[n[6]||(n[6]=a("p",{class:"custom-container-title"},"注意事项:",-1)),a("p",null,[n[2]||(n[2]=a("strong",null,"动态表名不是表别名！",-1)),n[3]||(n[3]=s(" 自定义表别名请参考 ")),a("strong",null,[t(o,{to:"/pages/core/lambda/join/leftJoin.html"},{default:r(()=>n[1]||(n[1]=[s("leftJoin")])),_:1})]),n[4]||(n[4]=a("br",null,null,-1)),n[5]||(n[5]=s(" 动态表名和别名没有任何关系，动态表名不会修改表别名!"))]),n[7]||(n[7]=e(`<p>举个例子：user表改成user_2023表</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token punctuation">.</span><span class="token function">setTableName</span><span class="token punctuation">(</span>name <span class="token operator">-&gt;</span> name <span class="token operator">+</span> <span class="token string">&quot;_2023&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改前：<br> select ... from user t<br> 修改后：<br> select ... form user_2023 t</p>`,3))]),n[10]||(n[10]=e(`<h2 id="配置-dynamictablename" tabindex="-1"><a class="header-anchor" href="#配置-dynamictablename"><span>配置 @DynamicTableName</span></a></h2><p>支持主表和副表动态表名<br> 主表需要添加@DynamicTableName注解启用动态表名 副表不需要添加也能实现动态表名</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token annotation punctuation">@DynamicTableName</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDO</span><span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>代码</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">MPJLambdaWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserDO</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MPJLambdaWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserDO</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">UserDO</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token class-name">AddressDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> on <span class="token operator">-&gt;</span> on</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">AddressDO</span><span class="token operator">::</span><span class="token function">getUserId</span><span class="token punctuation">,</span> <span class="token class-name">UserDO</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token comment">// 副表动态表名 name 为原副表名 返回新表名</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">setTableName</span><span class="token punctuation">(</span>name <span class="token operator">-&gt;</span> name <span class="token operator">+</span> <span class="token string">&quot;aaaaaaaaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token class-name">AreaDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">AreaDO</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> <span class="token class-name">AddressDO</span><span class="token operator">::</span><span class="token function">getAreaId</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token class-name">UserDO</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token class-name">UserDO</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 主表动态表名 name 为原主表表名 返回新表名</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">setTableName</span><span class="token punctuation">(</span>name <span class="token operator">-&gt;</span> name <span class="token operator">+</span> <span class="token string">&quot;bbbbbbb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5))])}const y=c(d,[["render",v],["__file","dynamic-table-name.html.vue"]]),h=JSON.parse('{"path":"/pages/core/other/dynamic-table-name.html","title":"动态表名","lang":"en-US","frontmatter":{"tags":["setTableName","@DynamicTableName"]},"headers":[{"level":2,"title":"MyBatis-Plus 动态表名插件","slug":"mybatis-plus-动态表名插件","link":"#mybatis-plus-动态表名插件","children":[]},{"level":2,"title":"wrapper动态表名支持","slug":"wrapper动态表名支持","link":"#wrapper动态表名支持","children":[]},{"level":2,"title":"配置 @DynamicTableName","slug":"配置-dynamictablename","link":"#配置-dynamictablename","children":[]}],"git":{"updatedTime":1726959355000,"contributors":[{"name":"yulichang","email":"570810310@qq.com","commits":1}]},"filePathRelative":"pages/core/other/dynamic-table-name.md"}');export{y as comp,h as data};
