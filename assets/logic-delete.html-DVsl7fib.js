import{_ as l,c as i,d as n,a as e,e as t,b as p,o as c,r as o}from"./app-BDaexJrU.js";const u={};function r(d,s){const a=o("Badge");return c(),i("div",null,[s[3]||(s[3]=n(`<h1 id="逻辑删除" tabindex="-1"><a class="header-anchor" href="#逻辑删除"><span>逻辑删除</span></a></h1><p>如果使用MP逻辑删除, MPJ默认也会带上逻辑删除<br> 可以通过以下方式关闭逻辑删除</p><p>配置文件全局关闭副表逻辑删除(默认开启)</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">mybatis-plus-join</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment">#关闭副表逻辑删除 默认开启(true)</span></span>
<span class="line">  <span class="token key atrule">sub-table-logic</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关闭本次查询副表逻辑删除</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line">wrapper<span class="token punctuation">.</span><span class="token function">disableSubLogicDel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>关闭本次查询主表逻辑删除</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line">wrapper<span class="token punctuation">.</span><span class="token function">disableLogicDel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="改变逻辑删除条件位置" tabindex="-1"><a class="header-anchor" href="#改变逻辑删除条件位置"><span>改变逻辑删除条件位置</span></a></h2>`,9)),e("p",null,[s[0]||(s[0]=t("全局配置副表逻辑删除条件的位置 ")),p(a,{type:"tip",text:"1.4.4+",vertical:"top"})]),s[4]||(s[4]=n(`<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line">  <span class="token key atrule">mybatis-plus-join</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment">#副表逻辑删除条件的位置 支持 where / on  </span></span>
<span class="line">    <span class="token comment">#默认 on （1.4.8+） </span></span>
<span class="line">    <span class="token comment">#注意：1.4.7.2及之前版本默认为where</span></span>
<span class="line">    <span class="token key atrule">logic-del-type</span><span class="token punctuation">:</span> on</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),e("p",null,[s[1]||(s[1]=t("本次查询所有副表逻辑删除条件位置为 on 语句 ")),p(a,{type:"tip",text:"1.4.4+",vertical:"top"})]),s[5]||(s[5]=n(`<div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line">  wrapper<span class="token punctuation">.</span><span class="token function">logicDelToOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1)),e("p",null,[s[2]||(s[2]=t("本次查询所有副表逻辑删除条件位置为 where 语句 ")),p(a,{type:"tip",text:"1.4.4+",vertical:"top"})]),s[6]||(s[6]=n(`<div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line">  wrapper<span class="token punctuation">.</span><span class="token function">logicDelToWhere</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="自定义逻辑删除位置" tabindex="-1"><a class="header-anchor" href="#自定义逻辑删除位置"><span>自定义逻辑删除位置</span></a></h2><p>如果既需要where又需要on可以关闭附表逻辑删除，自定义条件实现</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectJoinMaps</span><span class="token punctuation">(</span><span class="token class-name">JoinWrappers</span><span class="token punctuation">.</span><span class="token function">lambda</span><span class="token punctuation">(</span><span class="token class-name">UserDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token class-name">UserDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">//关闭本次查询副表逻辑删除</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">disableSubLogicDel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token class-name">AddressDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> on <span class="token operator">-&gt;</span> on</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">AddressDO</span><span class="token operator">::</span><span class="token function">getUserId</span><span class="token punctuation">,</span> <span class="token class-name">UserDO</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token comment">//手动添加 ON 语句逻辑删除</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">AddressDO</span><span class="token operator">::</span><span class="token function">getDel</span><span class="token punctuation">,</span> <span class="token string">&quot;未删除标识&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">//手动添加 where 语句逻辑删除</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserDO</span><span class="token operator">::</span><span class="token function">getDel</span><span class="token punctuation">,</span> <span class="token string">&quot;未删除标识&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4))])}const m=l(u,[["render",r],["__file","logic-delete.html.vue"]]),v=JSON.parse('{"path":"/pages/core/other/logic-delete.html","title":"逻辑删除","lang":"en-US","frontmatter":{"tags":["sub-table-logic","logic-del-type","logicDelToOn","logicDelToWhere"]},"headers":[{"level":2,"title":"改变逻辑删除条件位置","slug":"改变逻辑删除条件位置","link":"#改变逻辑删除条件位置","children":[]},{"level":2,"title":"自定义逻辑删除位置","slug":"自定义逻辑删除位置","link":"#自定义逻辑删除位置","children":[]}],"git":{"updatedTime":1726959355000,"contributors":[{"name":"yulichang","email":"570810310@qq.com","commits":1}]},"filePathRelative":"pages/core/other/logic-delete.md"}');export{m as comp,v as data};
