import{_ as n,c as p,a2 as i,j as t,a as e,G as l,B as h,o as k}from"./chunks/framework.CuCbyi2k.js";const b=JSON.parse('{"title":"逻辑删除","description":"","frontmatter":{"tags":["sub-table-logic","logic-del-type","logicDelToOn","logicDelToWhere"]},"headers":[],"relativePath":"pages/core/other/logic-delete.md","filePath":"pages/core/other/logic-delete.md","lastUpdated":1732763262000}'),d={name:"pages/core/other/logic-delete.md"};function r(E,s,g,o,c,y){const a=h("Badge");return k(),p("div",null,[s[3]||(s[3]=i(`<h1 id="逻辑删除" tabindex="-1">逻辑删除 <a class="header-anchor" href="#逻辑删除" aria-label="Permalink to &quot;逻辑删除&quot;">​</a></h1><p>如果使用MP逻辑删除, MPJ默认也会带上逻辑删除<br> 可以通过以下方式关闭逻辑删除</p><p>配置文件全局关闭副表逻辑删除(默认开启)</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus-join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #关闭副表逻辑删除 默认开启(true)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  sub-table-logic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><p>关闭本次查询副表逻辑删除</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wrapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disableSubLogicDel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>关闭本次查询主表逻辑删除</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wrapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disableLogicDel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h2 id="改变逻辑删除条件位置" tabindex="-1">改变逻辑删除条件位置 <a class="header-anchor" href="#改变逻辑删除条件位置" aria-label="Permalink to &quot;改变逻辑删除条件位置&quot;">​</a></h2>`,9)),t("p",null,[s[0]||(s[0]=e("全局配置副表逻辑删除条件的位置 ")),l(a,{type:"tip",text:"1.4.4+",vertical:"top"})]),s[4]||(s[4]=i(`<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mybatis-plus-join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #副表逻辑删除条件的位置 支持 where / on  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #默认 on （1.4.8+） </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #注意：1.4.7.2及之前版本默认为where</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    logic-del-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span></span></code></pre></div>`,1)),t("p",null,[s[1]||(s[1]=e("本次查询所有副表逻辑删除条件位置为 on 语句 ")),l(a,{type:"tip",text:"1.4.4+",vertical:"top"})]),s[5]||(s[5]=i('<div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wrapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logicDelToOn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div>',1)),t("p",null,[s[2]||(s[2]=e("本次查询所有副表逻辑删除条件位置为 where 语句 ")),l(a,{type:"tip",text:"1.4.4+",vertical:"top"})]),s[6]||(s[6]=i(`<div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wrapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logicDelToWhere</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h2 id="自定义逻辑删除位置" tabindex="-1">自定义逻辑删除位置 <a class="header-anchor" href="#自定义逻辑删除位置" aria-label="Permalink to &quot;自定义逻辑删除位置&quot;">​</a></h2><p>如果既需要where又需要on可以关闭附表逻辑删除，自定义条件实现</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">List&lt;Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectJoinMaps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(JoinWrappers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User.class)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //关闭本次查询副表逻辑删除</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disableSubLogicDel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">leftJoin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AddressDO.class, on </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> on</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AddressDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getUserId, User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getId)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //手动添加 ON 语句逻辑删除</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AddressDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getDel, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;未删除标识&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //手动添加 where 语句逻辑删除</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getDel, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;未删除标识&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div>`,4))])}const v=n(d,[["render",r]]);export{b as __pageData,v as default};
